(function(e){typeof module!="undefined"&&typeof module.exports!="undefined"&&(module.exports=e),typeof exports!="undefined"&&typeof exports!="function"&&(exports.noam=e),typeof define=="function"&&define.amd&&define("structure",[],function(){return e}),typeof window!="undefined"&&(window.structure=e)})(function(){var e={};return function(){function o(e){return Object.prototype.toString.call(e)==="[object Array]"}function u(e){e=Math.max(e,t[0]),e=Math.min(e,t[t.length-1]);var n=0,r=t.length-1,i;while(n<r)i=n+Math.floor((r-n)/2),t[i]>=e?r=i:n=i+1;return n}function a(e){var t,n;if(e===undefined)return 12345;if(e===null)return 54321;if(typeof e=="boolean"||typeof e=="number")return e&r;if(typeof e=="string"){t=5381;for(n=0;n<e.length;n++)t=(t*33^e.charCodeAt(n))&r;return t}if(o(e)){t=6421;for(n=0;n<e.length;n++)t=(t*37^a(e[n]))&r;return t}var i=[];for(n in e){if(!e.hasOwnProperty(n))continue;i.push(n)}i.sort(),t=3203;for(n=0;n<i.length;n++)t=((t*39^a(i[n]))*43^a(e[i[n]]))&r;return t}function f(e,t){if(e===t)return!0;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(e instanceof RegExp&&t instanceof RegExp)return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(e instanceof Object&&t instanceof Object){if(typeof e=="undefined"||typeof t=="undefined")return!1;if(e.constructor!==t.constructor)return!1;for(var n in e){if(!(n in t))return!1;if(e[n]===t[n])continue;if(typeof e[n]!="object")return!1;if(!f(e[n],t[n]))return!1}for(n in t)if(!(n in e))return!1;return!0}return!1}function l(e,t){this.key=e,this.value=t}function c(){}function h(e){this.node=e.head}function p(e,n){if(n>=t.length)throw new Error("Capacity of HashTable can't grow beyond "+t[t.length-1]);if(n>=0){var r=e.capacity,i=e.slots;e.capacity_index=n,e.capacity=t[n],e.slots=[];for(var s=0;s<r;s++)if(i[s]!==undefined){var o=i[s].iterator();while(o.hasNext())e._putNodeRsz(o.next())}}}function d(e,t){return e.hash(t)%e.capacity}function m(e){this.idx=0,this.H=e}function g(e){this.idx=0,this.H=e}function y(e){this.idx=0,this.H=e}var t=[5,11,23,47,97,197,397,797,1597,3203,6421,12853,25717,51437,102877,205759,411527,823117,1646237,3292489,6584983,13169977,26339969,52679969,105359939],n=0,r=(1<<31)-1,i=.75,s=.25;c.prototype.isEmpty=function(){return this.head===undefined},c.prototype.insertHead=function(e){e.next=this.head,this.head=e},c.prototype.removeSuccessor=function(e){e===undefined?this.head=this.head.next:e.next=e.next.next},c.prototype.put=function(e,t,n){var r=this.iterator();while(r.hasNext()){var i=r.next();if(e.equals(t,i.key))return i.value=n,!1}return this.insertHead(new l(t,n)),!0},c.prototype.get=function(e,t){var n=this.iterator();while(n.hasNext()){var r=n.next();if(e.equals(t,r.key))return r.value}return undefined},c.prototype.remove=function(e,t){var n=this.iterator(),r;while(n.hasNext()){var i=n.next();if(e.equals(t,i.key))return this.removeSuccessor(r),!0;r=i}return!1},h.prototype.hasNext=function(){return this.node!==undefined},h.prototype.next=function(){if(!this.hasNext())throw new Error("HashTable internal error: called _HashChainIterator.next on exhausted iterator");var e=this.node;return this.node=e.next,e},c.prototype.iterator=function(){return new h(this)},e.HashTable=function(e){this.capacity_index=n,e&&(e.initial_capacity&&(this.capacity_index=u(e.initial_capacity)),e.hash&&(this.hash=e.hash),e.equals&&(this.equals=e.equals)),this.capacity=t[this.capacity_index],this.numkeys=0,this.slots=[],typeof WeakMap!="undefined"&&Object.observe&&(this.slot_indices=new WeakMap,this.wrapper=function(e){return function(t){e._observe(t)}}(this))},e.HashTable.prototype.hash=a,e.HashTable.prototype.equals=f,e.HashTable.prototype.loadFactor=function(){return this.numkeys/this.capacity},e.HashTable.prototype.put=function(e,t){if(e===undefined)throw new Error("called HashTable.put with key === undefined");if(t===undefined)throw new Error("called HashTable.put with value === undefined");typeof WeakMap!="undefined"&&Object.observe&&(Object.deliverChangeRecords(this.wrapper),Object.observe(e,this.wrapper));var n=d(this,e);typeof WeakMap!="undefined"&&Object.observe&&this.slot_indices.set(e,n),this.slots[n]===undefined&&(this.slots[n]=new c),this.slots[n].put(this,e,t)&&(++this.numkeys,this.loadFactor()>i&&p(this,this.capacity_index+1))},e.HashTable.prototype._observe=function(e){var t,n,r,i,s=new Set;for(var o=0;o<e.length;o++){t=e[o].object;if(s.has(t))continue;s.add(t),r=this.slot_indices.get(t),i=this.slots[r];if(i===undefined)return;n=i.get(this,key),i.remove(this,key),r=d(this,t),this.slots[r]===undefined&&(this.slots[r]=new c),this.slots[r].put(this,t,n),this.slot_indices.set(t,r)}},e.HashTable.prototype._putNodeRsz=function(e){var t=d(this,e.key);typeof WeakMap!="undefined"&&Object.observe&&this.slot_indices.set(e.key,t),this.slots[t]===undefined&&(this.slots[t]=new c),this.slots[t].insertHead(e)},e.HashTable.prototype.get=function(e){if(e===undefined)throw new Error("called HashTable.get with key === undefined");typeof WeakMap!="undefined"&&Object.observe&&(Object.deliverChangeRecords(this.wrapper),Object.observe(e,this.wrapper));var t=d(this,e),n=this.slots[t];return n===undefined?undefined:n.get(this,e)},e.HashTable.prototype.remove=function(e){if(e===undefined)throw new Error("called HashTable.remove with key === undefined");typeof WeakMap!="undefined"&&Object.observe&&(Object.deliverChangeRecords(this.wrapper),Object.observe(e,this.wrapper));var t=d(this,e),n=this.slots[t];if(n===undefined)return;n.remove(this,e)&&(--this.numkeys,this.loadFactor()<s&&p(this,this.capacity_index-1)),typeof WeakMap!="undefined"&&Object.observe&&this.slot_indices.delete(e)},e.HashTable.prototype.isEmpty=function(){return this.numkeys===0},e.HashTable.prototype.clear=function(){this.capacity_index=n,this.capacity=t[this.capacity_index],this.numkeys=0,this.slots=[],typeof WeakMap!="undefined"&&Object.observe&&(this.slot_indices=new WeakMap)},e.HashTable.prototype.size=function(){return this.numkeys},e.HashTable.prototype.containsKey=function(e){if(e===undefined)throw new Error("called HashTable.containsKey with key === undefined");return this.get(e)!==undefined},e.HashTable.prototype.keys=function(){var e=[];for(var t=this.keyIterator();t.hasNext();)e.push(t.next());return e},e.HashTable.prototype.values=function(){var e=[];for(var t=this.valueIterator();t.hasNext();)e.push(t.next());return e},e.HashTable.prototype.entries=function(){var e=[];for(var t=this.keyValueIterator();t.hasNext();)e.push(t.next());return e};var v={hasNext:function(){if(this.cur_chain_iterator!==undefined&&this.cur_chain_iterator.hasNext())return!0;this.cur_chain_iterator!==undefined&&++this.idx;while(this.idx<this.H.capacity&&(this.H.slots[this.idx]===undefined||this.H.slots[this.idx].isEmpty()))++this.idx;var e=this.H.slots[this.idx];return e===undefined?(this.cur_chain_iterator=undefined,!1):(this.cur_chain_iterator=e.iterator(),!0)},_next:function(e,t){if(!this.hasNext())throw new Error(e);var n=t(this);return n},each:function(e,t){if(e===undefined)throw new Error("called iterator.each with iterator_func === undefined");for(var n=0,r=this;this.hasNext();n++)e.call(t,this.next(),n,this.H)}};m.prototype=Object.create(v),m.prototype.next=function(){return this._next("KeyIterator.next called on empty iterator",function(e){return e.cur_chain_iterator.next().key})},g.prototype=Object.create(v),g.prototype.next=function(){return this._next("ValueIterator.next called on empty iterator",function(e){return e.cur_chain_iterator.next().value})},y.prototype=Object.create(v),y.prototype.next=function(){return this._next("KeyValueIterator.next called on empty iterator",function(e){var t=e.cur_chain_iterator.next();return[t.key,t.value]})},e.HashTable.prototype.keyIterator=function(){return new m(this)},e.HashTable.prototype.valueIterator=function(){return new g(this)},e.HashTable.prototype.keyValueIterator=function(){return new y(this)}}(),e}());